<!DOCTYPE html>
<html lang="en">
	<head>
        <title>Swole Ape Fitness Club</title>
        <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
		<meta charset="UTF-8" />
    	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
    	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<!-- <link rel="stylesheet" href="css/style.css" /> -->

		<!-- Favicon-->
		<link rel="icon" type="image/x-icon" href="/assets/img/title-logo.png" />
		<!-- Font Awesome icons (free version)-->
		<script src="https://use.fontawesome.com/releases/v5.15.4/js/all.js" crossorigin="anonymous"></script>
		<!-- Font Awesome Kit -->
		<script src="https://kit.fontawesome.com/a4f8d8a65d.js" crossorigin="anonymous"></script>
		<!-- Google fonts-->
		<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
		<link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css" />
		<!-- Core theme CSS (includes Bootstrap)-->
		<link href="/css/styles.css" rel="stylesheet" type="text/css" />
		<link href="/css/mint-styles.css" rel="stylesheet" type="text/css" />
	   <!-- Iconify -->
		<script src="https://code.iconify.design/2/2.1.2/iconify.min.js"></script>

    	<style>
       
          p{
              display: grid;
              align-items: center;
              justify-content: center;
          }
          .grid{
              display: flex;
              grid-template-columns: repeat(3,1fr);
              grid-gap: 30px;
              justify-content: center;
			  
          }
          .grid > article{
              background: rgb(19, 17, 17);
              color: #fff;
              border: none;
              box-shadow: 2px 2px 6px 0px rgba(0,0,0,0.3);
              border-radius: 20px;
              text-align: center;
              transition: transform .3s;
          }
          .grid > article:hover{
              transform:translateY(5px);
              box-shadow: 2px 2px 26px 0px rgba(0,0,0,0.3);
          }
          .grid > article img {
              border-top-left-radius: 20px;
              border-top-right-radius: 20px;
			  padding-top: 0;
		  }
    	</style>

	</head>

	<body>
<!-- Nav -->

<nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav" style="padding: 8px;">
		<a id="navLogoDesktop" class="navbar-brand" href="#page-top"><img src="assets/img/web-logo.png" alt="SAFC-ape"/></a>
		<a id="navLogoMobile" class="navbar-brand" href="#page-top"><img src="assets/img/safc-ape.png" alt="SAFC-ape"/></a>
			<a><input class="btn btn-primary btn-sm text-uppercase d-inline" id="connectButton" value="Connect Wallet" onclick="connect();"></a>



	</nav>





<!-- Masthead -->
	<header class="masthead overflow-hidden">
		<div class="container">

						<!-- Mint Card	 -->
						<div class="row justify-content-center">
					<div class="col-7 col-xl-4 col-lg-4"  id="mint-card">
							<div class="grid">
								<article>
									
										<img src="assets/img/Cbum.png" class="img-fluid w-100" alt="Cbum-mint">
									
									<div class="m-5">
												
										<h4 class="phraseName" id="phraseName"></h4>
										<h4 class="phraseName2" id="phraseName2"></h4>
									   <h3 class="total mt-5 mb-1"><span id="ttt"></span>/8888</h3>
							
									 <div class="row justify-content-center">
										<div class="col">
									   <input class="form-control" type="text" id="mintAmount" value="1" maxlength="2">
									</input>
									<p id="Maximum" style="font-size: small; font-style: italic"></p>
									</div>
								</div>  
							
									   <p>
										<span id="status">
										</span>
									</p>
									   <!-- <button id="mint">Mint</button> -->
									   <a class="btn btn-primary btn-xl text-uppercase "id="mint">Mint</a>
									</div>
									
								</article>
								</div>
						</div>
						</div>

						<div class="alert row z-index-2 justify-content-between">
							<div class="col-auto ml-auto">
							<a class="btn btn-info btn-lg text-uppercase" href="https://opensea.io/collection/swoleapes-wtf-official" target="_blank">OpenSea</a>
							<a class="btn btn-info btn-lg text-uppercase" href="https://etherscan.io/address/0xbd8379d4b6dcf90f60bf35452efabae2a7a48cd7" target="_blank">Etherscan</a>
						</div>
				</div>
		<div class="row">
		
		<div class="col-sm-6 col-md-6 col-xl-5">
		<div id="mint-header-img">
			<img src="assets/img/header-bg-gym.png"></img>
		</div>
	</div>
	</div>
	</div>
	</header>
		
    <section class="page-section" id="contact">
        <div class="container py-5 my-5">
        </div>
        <h3 class="text-center" style="padding-top: 20rem;">Global domination coming soon.</h3>
		<div class="container">
			<ul class="navbar-nav text-uppercase ms-auto py-4 py-lg-0 list-inline justify-content-center">                    
			  <li class="list-inline-item"><a class="btn btn-primary mx-2" href="https://discord.gg/Kf23PkM3MW"> <i class="fab fa-discord"></i></a></li>
			  <li class="list-inline-item"><a class="btn btn-primary mx-2 " href="https://opensea.io/collection/swoleapes-wtf-official" target="_blank"><span class="iconify" data-icon="simple-icons:opensea"></span></a></li>
			  <li class="list-inline-item"><a class="btn btn-primary mx-2 " href="https://swoleapes.gitbook.io/nft/" target="_blank"><span class="iconify" data-icon="simple-icons:gitbook"></span></a></li>
			</ul>
		</div>
    </section>

<script type="text/javascript">
var phase = null;
var account = null;
var contract = null;
var dataV = null;
var connected;
const ABI = 

[
	{
		"inputs": [],
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "approved",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			}
		],
		"name": "Approval",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "operator",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "bool",
				"name": "approved",
				"type": "bool"
			}
		],
		"name": "ApprovalForAll",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			}
		],
		"name": "approve",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address payable",
				"name": "_newWallet",
				"type": "address"
			}
		],
		"name": "changeTreasury",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint8",
				"name": "_mintAmount",
				"type": "uint8"
			}
		],
		"name": "mint",
		"outputs": [],
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address[]",
				"name": "_addresses",
				"type": "address[]"
			},
			{
				"internalType": "uint256",
				"name": "quantity",
				"type": "uint256"
			}
		],
		"name": "mintForAddress",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "previousOwner",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "newOwner",
				"type": "address"
			}
		],
		"name": "OwnershipTransferred",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "uint8",
				"name": "_mintAmount",
				"type": "uint8"
			}
		],
		"name": "presaleMint",
		"outputs": [],
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint8",
				"name": "_mintAmount",
				"type": "uint8"
			}
		],
		"name": "publicMint",
		"outputs": [],
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "renounceOwnership",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			}
		],
		"name": "safeTransferFrom",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			},
			{
				"internalType": "bytes",
				"name": "_data",
				"type": "bytes"
			}
		],
		"name": "safeTransferFrom",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "operator",
				"type": "address"
			},
			{
				"internalType": "bool",
				"name": "approved",
				"type": "bool"
			}
		],
		"name": "setApprovalForAll",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "baseURI_",
				"type": "string"
			}
		],
		"name": "setBaseURI",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint8",
				"name": "_maxBuy",
				"type": "uint8"
			}
		],
		"name": "setMaxBuy",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "_newPrice",
				"type": "uint256"
			}
		],
		"name": "setMintPrice",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint8",
				"name": "_phase",
				"type": "uint8"
			}
		],
		"name": "setPhase",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint8",
				"name": "_maxBuy",
				"type": "uint8"
			}
		],
		"name": "setPresaleMaxBuy",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "_newPrice",
				"type": "uint256"
			}
		],
		"name": "setPresalePrice",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			}
		],
		"name": "Transfer",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			}
		],
		"name": "transferFrom",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "newOwner",
				"type": "address"
			}
		],
		"name": "transferOwnership",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "_amount",
				"type": "uint256"
			}
		],
		"name": "updateFreeAmount",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "_supply",
				"type": "uint256"
			}
		],
		"name": "updateSupply",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "withdraw",
		"outputs": [],
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "owner",
				"type": "address"
			}
		],
		"name": "balanceOf",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "contractOwner",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "freeAmount",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			}
		],
		"name": "getApproved",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "getBaseURI",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "getContractBalance",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "operator",
				"type": "address"
			}
		],
		"name": "isApprovedForAll",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "maxBuy",
		"outputs": [
			{
				"internalType": "uint8",
				"name": "",
				"type": "uint8"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "mintPrice",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "name",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "owner",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			}
		],
		"name": "ownerOf",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "phase",
		"outputs": [
			{
				"internalType": "uint8",
				"name": "",
				"type": "uint8"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "presaleMaxBuy",
		"outputs": [
			{
				"internalType": "uint8",
				"name": "",
				"type": "uint8"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "presalePrice",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "supply",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "bytes4",
				"name": "interfaceId",
				"type": "bytes4"
			}
		],
		"name": "supportsInterface",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "symbol",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "index",
				"type": "uint256"
			}
		],
		"name": "tokenByIndex",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "index",
				"type": "uint256"
			}
		],
		"name": "tokenOfOwnerByIndex",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			}
		],
		"name": "tokenURI",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "totalSupply",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"name": "walletBuys",
		"outputs": [
			{
				"internalType": "uint8",
				"name": "",
				"type": "uint8"
			}
		],
		"stateMutability": "view",
		"type": "function"
	}
];

const ADDRESS = "0xBd8379d4B6DcF90f60Bf35452eFABAe2A7A48CD7";

const checkConnection = async () => {
// Check if browser is running Metamask
	if (window.ethereum) {
		//await window.ethereum.request({ method: "eth_requestAccounts" });
     	window.web3 = new Web3(window.ethereum);
	} else if (window.web3) {
	//await window.ethereum.request({ method: "eth_requestAccounts" });
     	//window.web3 = new Web3(window.ethereum);
		console.log('ok');
	};

// Check if User is already connected by retrieving the accounts
	contract = new web3.eth.Contract(ABI, ADDRESS);

	var accounts = await web3.eth.getAccounts();
	console.log(accounts);
	account = accounts[0];
	document.getElementById('connectButton').value = "✔️ " + account.substr(0,6) + "...";

	fetch('/proof/' + account)
  			.then((response) => response.json())
  			.then((data) => {
				dataV = data;
				console.log(dataV);
			})

	getPhase();
};

checkConnection();

async function connect() {
  if (window.ethereum) {
	await window.ethereum.request({ method: "eth_requestAccounts" });
     window.web3 = new Web3(window.ethereum);
	 var accounts = await web3.eth.getAccounts();
		account = accounts[0];
		//document.getElementById('wallet_address').textContent = account;

		document.getElementById('connectButton').value = "✔️ " + account.substr(0,6) + "...";

		fetch('/proof/' + account)
  			.then((response) => response.json())
  			.then((data) => {
				dataV = data;
				console.log(dataV);
			})
			
		getPhase();
  
  } else {
   console.log("No wallet");
  }
}

async function getPhase () {
	contract.methods.phase().call().then(function(result) {
			console.log(result);

			var mintCost = 0.00;

			if (result == 0 && dataV.v == true){
				
				document.getElementById('phraseName').textContent = "Whitelist Free Mint Only";
				document.getElementById('status').textContent = text;
				
			} else if (result == 1){
				document.getElementById('phraseName').textContent = "Closed";
				document.getElementById('phraseName2').textContent = "Opens at 5pm PST";
			}
			 if (result == 2) {
				//text = "Current Phase: Public Free Mint";
				document.getElementById('phraseName').textContent = "Public Free Mint";
				document.getElementById('phraseName2').textContent = "Open";
				document.getElementById('Maximum').textContent = "Maximum 1 Free per Wallet."
			}
			if (result == 3) {
			
				document.getElementById('phraseName').textContent = "Open Mint"
				document.getElementById('phraseName2').textContent = "0.008 ETH Each";
				document.getElementById('Maximum').textContent = "Maximum 50 per Wallet Address."
			};

			document.getElementById('mint').onclick = () => {
				var mintCost = 0;
				var mintAmount = document.getElementById('mintAmount').value;

				if (result == 1 && dataV.v == true){
					contract.methods.presaleMint(mintAmount).send({from: account, value: mintCost});
				};
				if (result == 2){
					contract.methods.publicMint(mintAmount).send({from: account, value: mintCost});
				};
				if (result == 3){
					mintCost = 8000000000000000 * mintAmount;
					contract.methods.mint(mintAmount).send({from: account, value: mintCost});
				};
			}
		});
		
		var totalsupply = await contract.methods.totalSupply().call();
		document.getElementById('ttt').textContent = totalsupply;
	}

</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="/scripts.js"></script>
<script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>

</body>
</html>

